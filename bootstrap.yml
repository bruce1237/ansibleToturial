---
- hosts: all
  become: true
  pre_tasks:

  - name: add essentials sudo, nano, vim
    tags: always
    yum:
      name: 
        - sudo
        - python3
        - nano
        - vim 
      state: latest
      update_cache: yes
      update_only: yes

  - name: remove nano 
    tags: MV 
    package:
      name: 
        - nano
      state: removed

- hosts: all
  become: true
  tasks:
    - name: create simone user
      tags: always
      user:
        name: simone
        groups: root
          
    - name: add ssh key for simone
      tags: always
      authorized_key:
        user: simone
        key: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDi4x2RGdfVvi4qTDVuI9xQezSh5tSCEmAnjainHmNxsttXo+NZV3mffRMNO1d2TwA2tQvVlFkdZe9b1X3esfjlwWhju+9ikx8fH6U5OHzrM2ExiJ98c7CimedjU07l/WHnzIeULDX9nEL5wEAA9V09H7e05bkAcy2t7ZWfaqAnFLF673eJCs00dARZswgo/2zv6Py3NuD57idifjDG7WltnAV0VihSveiKk99lnG3NAab7QErn6kuyaOJWrKDVb6dBWmNDCjVYrer38nEAetMQH3vkOMXA/RQv+S4twfgAvAYB9OS5gRZpCtsxTPOs7GgF/WctfBEYcYLaPxe91BjN root@dnode1.technix.com"

    - name: add sudoers file for simone
      tags: always
      copy:
        src: sudoer_simone
        dest: /etc/sudoers.d/simone
        owner: root
        group: root
        mode: 0440


        
